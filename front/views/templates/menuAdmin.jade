section#menuAdminController(ng-controller="menuAdminController")
  .container
    .row
      .col-md-8
        .row
          ui-gmap-google-map.mapForAddBeerOrBar(center='map.center',zoom='map.zoom')
            ui-gmap-markers(models="myLocation",idKey="'uid'",icon="'icon'",coords="'self'")
            ui-gmap-markers(models="barsLocation",idKey="'uid'",icon="'icon'",coords="'self'",click="'onClick'")

        .row
          div#infoBar(ng-show="bar.selected")
            h3 List of Beer here : {{bar.selected.nom}}
            table.table.table-striped
              thead
                tr
                  th Name
                  th Type
                  th Alcool
                  th Price
                  th Validate
              tbody
                tr(ng-repeat='consumption in bar.selected.consumptions')
                  td {{ consumption.beer_id[0].nom }}
                  td {{ consumption.beer_id[0].type_id[0].name }}
                  td {{ consumption.beer_id[0].alcool }} %
                  td {{ consumption.price }} â‚¬
                  td(ng-show='consumption.enable')
                    button.btn.btn-default(ng-click="changerEtatConsumption(consumption)")
                      span.glyphicon.glyphicon-ok-circle
                  td(ng-hide='consumption.enable')
                    button.btn.btn-default(ng-click="changerEtatConsumption(consumption)")
                      span.glyphicon.glyphicon-remove-circle

      .col-md-4
        form
          div
            h4
              span.glyphicon.glyphicon-search
              label Choose a Bar
            .form-group
              label(for="nameOBar") Name of Bar
              ui-select(ng-model='bar.selected',theme='bootstrap', ng-disabled='addNewBar', reset-search-input='false', style='width: 300px;')
                ui-select-match(placeholder='Enter an bar...') {{$select.selected.nom}}
                ui-select-choices(repeat='bar in bars track by $index', refresh='refreshBars($select.search)', refresh-delay='0')
                  div(ng-bind-html='bar.nom | highlight: $select.search')
              span.glyphicon.glyphicon-plus
                a(ng-click="addNewBar=!addNewBar") Add a new bar

          div(ng-show="addNewBar")
            .form-group
              label(for="nameOfBar") Name :
              input#nameOfBar.form-control(ng-model="bar.selected.nom",ng-disabled="!addNewBar")

            .form-group
              label(for="addressOfBar") Address :
              input#addressOfBar.form-control(ng-model="bar.selected.adresse",ng-disabled="!addNewBar")

            .form-group
              label(for="geolocationOfBar") Geolocation :
              input#geolocationOfBar.form-control(ng-model="bar.selected.geolocation",ng-disabled="true")

            .form-group
             button.btn.btn-primary(type="button",ng-click="createBar()",ng-disabled="!addNewBar") Create Bar

          div
            h4
              span.glyphicon.glyphicon-search
              label Choose a Beer

            .form-group
              label(for="nameOfBeer") Name of Beer
              ui-select(ng-model='beer.selected', theme='bootstrap', ng-disabled='addNewBeer', reset-search-input='false', style='width: 300px;')
                ui-select-match(placeholder='Enter an beer...') {{$select.selected.nom}}
                ui-select-choices(repeat='beer in beers track by $index', refresh='refreshBeers($select.search)', refresh-delay='0')
                  div(ng-bind-html='beer.nom | highlight: $select.search')
              span.glyphicon.glyphicon-plus
                a(ng-click="addNewBeer=!addNewBeer") Add a new beer

          div(ng-show="addNewBeer")
            .form-group
              label(for="nameOfBeer") Name :
              input#nameOfBeer.form-control(ng-model="beer.selected.nom",ng-disabled="!addNewBeer")

            .form-group
              label(for="typeOfBeer") Type :
              ui-select(ng-model='beer.selected.type_id[0]', theme='bootstrap', ng-disabled='!addNewBeer', reset-search-input='false', style='width: 300px;')
                ui-select-match(placeholder='Enter an type...') {{beer.selected.type_id[0].name}}
                ui-select-choices(repeat='type in types track by $index', refresh='refreshTypes($select.search)', refresh-delay='0')
                  div(ng-bind-html='type.name | highlight: $select.search')

            .form-group
              label(for="alcoolInBeer") Alcool :
              input#alcoolInBeer.form-control(type="number",ng-model="beer.selected.alcool",ng-disabled="!addNewBeer")

            .form-group
              label(for="breweryForBeer") Brewery :
                ui-select(ng-model='beer.selected.brewery_id[0]', theme='bootstrap', ng-disabled='!addNewBeer', reset-search-input='false', style='width: 300px;')
                  ui-select-match(placeholder='Enter an Brewery...') {{beer.selected.brewery_id[0].name}}
                  ui-select-choices(repeat='item in breweries track by $index', refresh='refreshBreweries($select.search)', refresh-delay='0')
                    div(ng-bind-html='item.name | highlight: $select.search')

            .form-group
              button.btn.btn-primary(type="button",ng-click="createBeer()",ng-disabled="!addNewBeer") Create Beer

          div
            .form-group
              label(for="priceOfBeer") Price :
              input#priceOfBeer.form-control(ng-model="price",ng-disabled="!bar.selected._id || !beer.selected._id")

            button.btn.btn-primary(type="button",ng-click="link()",ng-disabled="!bar.selected._id || !beer.selected._id || form.priceOfBeer.$error") Ling Beer To Bar


